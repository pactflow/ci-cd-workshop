## Making changes on a branch; or, how NOT to break everything

When we made first made the change to the pact on the master branch of the consumer, we ended up with broken consumer and provider builds, stopping them both from releasing. In the previous step, we learned how to configure the provider so that it could still continue to be released, even if it was not able to successfully verify the new pact.

The consumer is still unable to make a release from master however, as the `can-i-deploy` step correctly identifies that the verification for the `master` pact has failed.

Let's make our changes on a branch this time.

1. Revert the change to master and push to make the build go green again.

```
git revert HEAD
git push
```

1. Create a new branch

    ```
      git checkout -b feat/new-field
    ```

1. Add the new field again (e.g. `color: "red"`), and update the `expect(product).toStrictEqual` to expect the new field and value.

1. Make sure the tests pass locally by running `make test`.

1. Push your changes by running `git push --set-upstream origin feat/new-field`.
    * The consumer build will still fail - but this time, it won't block the project from being deployed, as we made the changes on a branch.
    * The webhook-triggered pact verification build will still fail - that's ok, as it doesn't stop the provider from deploying.

Why does making the changes on a branch stop the provider build from failing?

In the [publish.pact.js](https://github.com/pactflow/example-consumer/blob/master/publish.pact.js) file in the consumer project, we have tagged the consumer version with the name of the branch.

```js

const branch = process.env.TRAVIS_BRANCH;
const opts = {
  ...,
  tags: [branch]
};
```

In the [product.pact.test.js](https://github.com/pactflow/example-provider/blob/master/product/product.pact.test.js) file in the provider project, we have configured the verification task to fetch the pacts that belong to the latest consumer versions with `master` and `prod` tags (more on the prod part later).

```js

const fetchPactsDynamicallyOpts = {
  provider: "pactflow-example-provider",
  consumerVersionTag: ['master', 'prod'],
  ...
}
```

By tagging with the name of the branch, and changing the pact on a feature branch, we keep both the consumer and provider builds green.

### Conclusion

By publishing pacts with tags, and configuring the provider to verify the tag that belongs to your main line of development (eg. `master` or `develop`) you keep your release pipelines green.
